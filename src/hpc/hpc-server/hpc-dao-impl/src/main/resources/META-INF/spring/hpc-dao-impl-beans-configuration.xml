<?xml version="1.0" encoding="UTF-8"?>
<!--  
 * hpc-dao-impl-beans-configuration.xml
 *
 * Copyright SVG, Inc.
 * Copyright Leidos Biomedical Research, Inc
 * 
 * Distributed under the OSI-approved BSD 3-Clause License.
 * See http://ncip.github.com/HPC/LICENSE.txt for details.
 *
 * @author <a href="mailto:eran.rosenberg@nih.gov">Eran Rosenberg</a>
 * @version $Id$
 -->
 
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
	     
	<!-- HPC Encryptor -->
	<bean id="hpcEncryptor" class="gov.nih.nci.hpc.dao.mongo.codec.HpcEncryptor">
		<constructor-arg value="${hpc.dao.mongo.encryptor.key}" />
	</bean>
	
	<!--  HPC User Codecs -->
	<bean id="hpcManagedUserCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcManagedUserCodec"/>
	<bean id="hpcUserCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcUserCodec"/>
	<bean id="hpcDataTransferAccountCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcDataTransferAccountCodec">
		<constructor-arg ref="hpcEncryptor" />
	</bean>
	      
	<!--  HPC Dataset Codecs -->
	<bean id="hpcManagedDatasetCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcManagedDatasetCodec"/>
	<bean id="hpcDatasetCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcDatasetCodec"/>
	<bean id="hpcFileCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcFileCodec"/>
	<bean id="hpcFileLocationCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcFileLocationCodec"/>
	<bean id="hpcFileMetadataCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcFileMetadataCodec"/>
	<bean id="hpcFilePrimaryMetadataCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcFilePrimaryMetadataCodec"/>
	<bean id="hpcMetadataItemCodec" 
	      class="gov.nih.nci.hpc.dao.mongo.codec.HpcMetadataItemCodec"/>
	
	<!--  HPC Codec Provider -->
	<bean id="hpcCodecProvider" class="gov.nih.nci.hpc.dao.mongo.codec.HpcCodecProvider">
		<constructor-arg>
			<map>
				<entry key="gov.nih.nci.hpc.domain.model.HpcManagedUser" 
				       value-ref="hpcManagedUserCodec"/>
				<entry key="gov.nih.nci.hpc.domain.user.HpcUser" 
				       value-ref="hpcUserCodec"/>
				<entry key="gov.nih.nci.hpc.domain.user.HpcDataTransferAccount" 
				       value-ref="hpcDataTransferAccountCodec"/>
				       
				<entry key="gov.nih.nci.hpc.domain.model.HpcManagedDataset" 
				       value-ref="hpcManagedDatasetCodec"/>
				<entry key="gov.nih.nci.hpc.domain.dataset.HpcDataset" 
				       value-ref="hpcDatasetCodec"/>
				<entry key="gov.nih.nci.hpc.domain.dataset.HpcFile" 
				       value-ref="hpcFileCodec"/>
				<entry key="gov.nih.nci.hpc.domain.dataset.HpcFileLocation" 
				       value-ref="hpcFileLocationCodec"/>
				<entry key="gov.nih.nci.hpc.domain.metadata.HpcFileMetadata" 
				       value-ref="hpcFileMetadataCodec"/>
				<entry key="gov.nih.nci.hpc.domain.metadata.HpcFilePrimaryMetadata" 
				       value-ref="hpcFilePrimaryMetadataCodec"/>
				<entry key="gov.nih.nci.hpc.domain.metadata.HpcMetadataItem" 
				       value-ref="hpcMetadataItemCodec"/>
			</map>
		</constructor-arg>
	</bean>
	
	<!-- HPC MongoDB instance -->
	<bean id="hpcMongoDB" class="gov.nih.nci.hpc.dao.mongo.driver.HpcMongoDB">
		<constructor-arg value="${hpc.dao.mongo.dbName}" index="0"/>
		<constructor-arg value="${hpc.dao.mongo.server.host}" index="1"/>
		<constructor-arg ref="hpcCodecProvider" index="2"/>
		<constructor-arg index="3">
			<map>
				<entry key="gov.nih.nci.hpc.domain.model.HpcManagedUser" 
				       value="managedUser"/>
				<entry key="gov.nih.nci.hpc.domain.model.HpcManagedDataset" 
				       value="managedDataset"/>
			</map>
		</constructor-arg>
	</bean>
	
 	<!-- HPC DAO Implementation Beans -->
	<bean id="hpcManagedDatasetDAO" 
	      class="gov.nih.nci.hpc.dao.mongo.impl.HpcManagedDatasetDAOImpl">
		<constructor-arg ref="hpcMongoDB"/>
	</bean>
	<bean id="hpcManagedUserDAO" 
	      class="gov.nih.nci.hpc.dao.mongo.impl.HpcManagedUserDAOImpl">
		<constructor-arg ref="hpcMongoDB"/>
	</bean>

</beans>