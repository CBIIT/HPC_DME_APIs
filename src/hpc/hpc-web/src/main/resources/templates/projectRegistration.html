<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" ng-app="data.registration">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="HPC Data Management"/>
    <meta name="author" content="SVG, Inc"/>
    <link rel="shortcut icon" href="img/favicon.png"/>

    <title>HPC Data Management</title>

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <!-- bootstrap theme -->
    <link href="css/bootstrap-theme.css" rel="stylesheet"/>
    <!--external css-->
    <!-- font icon -->
    <link href="css/elegant-icons-style.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <!-- full calendar css-->
    <link href="assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css" rel="stylesheet" />
	<link href="assets/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" />
    <!-- easy pie chart-->
    <link href="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>
    <!-- owl carousel -->
    <link rel="stylesheet" href="css/owl.carousel.css" type="text/css"/>
	<link href="css/jquery-jvectormap-1.2.2.css" rel="stylesheet"/>
    <!-- Custom styles -->
	<link rel="stylesheet" href="css/fullcalendar.css"/>
	<link href="css/widgets.css" rel="stylesheet"/>
    <link href="css/style.css" rel="stylesheet"/>
    <link href="css/style-responsive.css" rel="stylesheet" />
	<link href="css/xcharts.min.css" rel=" stylesheet"/>
	<link href="css/jquery-ui-1.10.4.min.css" rel="stylesheet"/>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
      <script src="js/lte-ie7.js"></script>
    <![endif]-->  
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular-animate.js"></script>      
<script>

angular.module('data.registration', ['ngAnimate', 'ui.bootstrap']);
angular.module('data.registration').controller('TypeaheadCtrl', function($scope, $http) {
	
	 // $scope.selected = undefined;
	  $scope.getLocation = function(val) {
	    return $http.get('/getEndpoint', {
	      params: {
	        userGO: $scope.userNameGO,
	        passGO: $scope.passwordGO,
	      }
	    }).then(function(response){
	      return response.data.DATA.map(function(item){
	        return item.canonical_name;
	      });
	    });
	  };
	  $scope.documents = [];
	  $scope.onChange = function () {
		  //$("#fileList").empty();
	  };
	  $scope.onSelect = function ($item, $model, $label) {
		    $scope.$item = $item;
		    $scope.$model = $model;
		    $scope.$label = $label;	
		    var selEPName = $item;
			//alert('1111::' + selEPName);
		    $http.get('/getEndpointContents', {
			      params: {
			    	  endpointName: selEPName,
				      userGO: $scope.userNameGO,
				      passGO: $scope.passwordGO,
			      }
			    }).then(function(response){
			    	
			      return response.data.DATA.map(function(item,i){

			    	  $scope.documents[i] = item.name;
			      });
			    });			

		};
		
    // selected files
    $scope.filesChecked = [];
    
    // toggle selection for a given fruit by name
    $scope.toggleSelection = function toggleSelection(fileName) {
      var idx = $scope.filesChecked.indexOf(fileName);
      
      // is currently selected
      if (idx > -1) {
    	  //alert("idx:"+idx);
        $scope.filesChecked.splice(idx, 1);
      }
      else {
    	  //alert("fileName"+fileName);
        $scope.filesChecked.push(fileName);
        
      }
    };		
	});
	

	
function cancel() {
	window.location.replace("/dashboard");
	return false;
	//document.getElementById("enroll").method="GET";
    //document.getElementById("enroll").action="/";
    
}

</script>      
  </head>

  <body>
  <!-- container section start -->
  <section id="container" class="">
  <div th:include="header :: header"></div>
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
              <!--Title start-->
				<div class="row">
					<div class="col-lg-12">
						<h3 class="page-header">
							<i class="fa fa-dashboard"></i> Dashboard
						</h3>
						<ol class="breadcrumb">
							<li><i class="fa fa-dashboard"></i><a th:href="@{/dashboard}">Dashboard</a></li>
							<li><i class="fa fa-list-alt"></i>Project Registration</li>
						</ol>
					</div>
				</div>
			<!--Title End-->
			<!--Row start-->
<form class="form-horizontal" action="#" role="form" th:action="@{/registerProject}" th:object="${hpcProjectRegistration}" method="post" enctype="multipart/form-data">
  <div class="row">
	<h3><UL>HPC Project Registration</UL></h3><br/><br/>
	<div th:if="${error != null}">
		<div class="alert alert-error">  
		  <a class="close" data-dismiss="alert">Ã—</a>  
			   <label for="${error}" th:text="${error}"></label>
		</div>  
	</div>
	<div class="form-group">
	  <label class="control-label col-sm-2" for="Project Type">Project Type:</label>
	  <div class="col-sm-7">
		<label th:if="${#fields.hasErrors('projectType')}" th:errors="*{projectType}">Project Type Error</label>
		<select th:field="*{projectType}" class="form-control" th:required="required">
		    <option value="-1">----Select----</option>
		    <option th:each="entry : ${projectTypeList.entrySet()}" th:value="${entry.key}" th:text="${entry.value}">
			Wireframe</option>
        </select>
	  </div>
	</div>
	<div class="form-group">
	<label class="control-label col-sm-2" for="datasetName">Name:</label>
	  <div class="col-sm-7">
		<label th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Project name Error</label>
		<input type="text" class="form-control" th:field="*{name}" th:required="required" placeholder="Enter Project name"/>
	  </div>
	</div>
	<div class="form-group">
	<label class="control-label col-sm-2" for="internalProjectId">Internal Project Id:</label>
	  <div class="col-sm-7">
		<label th:if="${#fields.hasErrors('internalProjectId')}" th:errors="*{internalProjectId}">Internal Project Id</label>
		<input type="text" class="form-control" th:field="*{internalProjectId}" th:required="required" placeholder="Enter Internal Project Id"/>
	  </div>
	</div>	
	<div class="form-group">
	<label class="control-label col-sm-2" for="description">Description:</label>
	  <div class="col-sm-7">
		<label th:if="${#fields.hasErrors('description')}" th:errors="*{description}">Description Error</label>
		<textarea rows="4" col="100" class="form-control" th:field="*{description}" th:required="required" placeholder="Enter Project description"/>
	  </div>
	</div>
	<div class="form-group">
	  <label class="control-label col-sm-2" for="principalInvestigatorNihUserId">Investigator Name:</label>
	  <div class="col-sm-7">
		<label th:if="${#fields.hasErrors('principalInvestigatorNihUserId')}" th:errors="*{principalInvestigatorNihUserId}">investigatorName Error</label>
		<select th:field="*{principalInvestigatorNihUserId}" class="form-control" th:required="required">
		    <option value="-1">----Select----</option>
		    <option th:each="entry : ${piList.entrySet()}" th:value="${entry.key}" th:text="${entry.value}">
			Wireframe</option>
        </select>
	  </div>
	</div>
	<div class="form-group">
	  <label class="control-label col-sm-2" for="branchName">Lab/Branch:</label>
	  <div class="col-sm-7">
		<label th:if="${#fields.hasErrors('labBranch')}" th:errors="*{labBranch}">branchName Error</label>
		<select th:field="*{labBranch}" class="form-control" th:required="required"><option value="" selected="selected">- Select -</option><option value="ccr">Center for Cancer Research</option><option value="dermatology_branch">Dermatology Branch</option><option value="developmental_therapeutics_branch">Developmental Therapeutics Branch</option><option value="endocrine_oncology_branch">Endocrine Oncology Branch</option><option value="experimental_immunology_branch">Experimental Immunology Branch</option><option value="experimental_transplantation_and_immunology_branch">Experimental Transplantation and Immunology Branch</option><option value="genetics_branch">Genetics Branch</option><option value="genitourinary_malignancies_branch">Genitourinary Malignancies Branch</option><option value="hiv_and_aids_malignancy_branch">HIV and AIDS Malignancy Branch</option><option value="hiv_drp_host-virus_interaction_branch">HIV DRP Host-Virus Interaction Branch</option><option value="lymphoid_malignancies_branch">Lymphoid Malignancies Branch</option><option value="neuro-oncology_branch">Neuro-Oncology Branch</option><option value="pediatric_oncology_branch">Pediatric Oncology Branch</option><option value="radiation_biology_branch">Radiation Biology Branch</option><option value="radiation_oncology_branch">Radiation Oncology Branch</option><option value="surgery_branch">Surgery Branch</option><option value="thoracic_and_gastrointestinal_oncology_branch">Thoracic and Gastrointestinal Oncology Branch</option><option value="urologic_oncology_branch">Urologic Oncology Branch</option><option value="vaccine_branch">Vaccine Branch</option><option value="women&#039;s_malignancies_branch">Women&#039;s Malignancies Branch</option><option value="basic_research_laboratory">Basic Research Laboratory</option><option value="cancer_and_developmental_biology_laboratory">Cancer and Developmental Biology Laboratory</option><option value="chemical_biology_laboratory">Chemical Biology Laboratory</option><option value="gene_regulation_and_chromosome_biology_laboratory">Gene Regulation and Chromosome Biology Laboratory</option><option value="hiv_drp_retroviral_replication_laboratory">HIV DRP Retroviral Replication Laboratory</option><option value="laboratory_of_biochemistry_and_molecular_biology">Laboratory of Biochemistry and Molecular Biology</option><option value="laboratory_of_cancer_biology_and_genetics">Laboratory of Cancer Biology and Genetics</option><option value="laboratory_of_cell_and_developmental_signaling">Laboratory of Cell and Developmental Signaling</option><option value="laboratory_of_cell_biology">Laboratory of Cell Biology</option><option value="laboratory_of_cellular_and_molecular_biology">Laboratory of Cellular and Molecular Biology</option><option value="laboratory_of_cellular_oncology">Laboratory of Cellular Oncology</option><option value="laboratory_of_experimental_carcinogenesis">Laboratory of Experimental Carcinogenesis</option><option value="laboratory_of_experimental_immunology">Laboratory of Experimental Immunology</option><option value="laboratory_of_genitourinary_cancer_pathogenesis">Laboratory of Genitourinary Cancer Pathogenesis</option><option value="laboratory_of_genome_integrity">Laboratory of Genome Integrity</option><option value="laboratory_of_human_carcinogenesis">Laboratory of Human Carcinogenesis</option><option value="laboratory_of_immune_cell_biology">Laboratory of Immune Cell Biology</option><option value="laboratory_of_metabolism">Laboratory of Metabolism</option><option value="laboratory_of_molecular_biology">Laboratory of Molecular Biology</option><option value="laboratory_of_molecular_immunoregulation">Laboratory of Molecular Immunoregulation</option><option value="laboratory_of_pathology">Laboratory of Pathology</option><option value="laboratory_of_protein_dynamics_and_signaling">Laboratory of Protein Dynamics and Signaling</option><option value="laboratory_of_receptor_biology_and_gene_expression">Laboratory of Receptor Biology and Gene Expression</option><option value="laboratory_of_tumor_immunology_and_biology">Laboratory of Tumor Immunology and Biology</option><option value="macromolecular_crystallography_laboratory">Macromolecular Crystallography Laboratory</option><option value="molecular_targets_laboratory">Molecular Targets Laboratory</option><option value="structural_biophysics_laboratory">Structural Biophysics Laboratory</option><option value="cancer_and_inflammation_program">Cancer and Inflammation Program</option><option value="hiv_drug_resistance_program">HIV Drug Resistance Program</option><option value="molecular_imaging_program">Molecular Imaging Program</option><option value="mouse_cancer_genetics_program">Mouse Cancer Genetics Program</option></select>	  
	  </div>
	</div>
<div class="row">
    <label class="control-label col-sm-2" for="datasetName">Custom Attributes</label>
</div>
<div class="container">
    <div class="row clearfix">
		<div class="col-md-12 column">
			<table class="table table-bordered table-hover" id="tab_logic">
				<thead>
					<tr >
						<th class="text-center">
							Attribute Name
						</th>
						<th class="text-center">
							Attribute Value
						</th>
					</tr>
				</thead>
				<tbody>
					<tr id='attr0'>
						<td>
						<select name="customAttrName0" class="form-control" th:required="required">
						    <option value="-1">----Select----</option>
						    <option th:each="entry : ${userAttrs.entrySet()}" th:value="${entry.key}" th:text="${entry.value}">
							Wireframe</option>
				        </select>
						</td>
						<td>
						<input type="text" name='customAttrValue0' placeholder='Value' class="form-control"/>
						</td>
					</tr>
                    <tr id='attr1'></tr>
				</tbody>
			</table>
		</div>
	</div>
	<a id="add_row" class="btn btn-default pull-left">Add Attribute</a><a id='delete_row' class="pull-right btn btn-default">Delete Attribute</a>
</div>

  <div class="row">
	<div class="form-group">
	  <div class="col-sm-offset-2 col-sm-7">
		<button type="submit" class="btn btn-lg btn-success">Register</button>
		<button type="submit" class="btn btn-lg btn-success" onClick="return cancel()">Cancel</button>
	  </div>
	</div>  
  </div>
  </div>
  </form>
          </section>
      </section>
      <!--main content end-->
  </section>
  <!-- container section start -->

    <!-- javascripts -->
    <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.13.3.js"></script>
	<script src="js/metawidget/core/metawidget-core.min.js" type="text/javascript"></script>	
	<script src="js/metawidget/metawidget-bootstrap.min.js" type="text/javascript"></script>	
    <script src="js/jquery.js"></script>
	<script src="js/jquery-ui-1.10.4.min.js"></script>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script>	
	<script src="js/metawidget/metawidget-jqueryui.min.js" type="text/javascript"></script>
    <!-- bootstrap -->
    <script src="js/bootstrap.min.js"></script>
    <!-- nice scroll -->
    <script src="js/jquery.scrollTo.min.js"></script>
    <script src="js/jquery.nicescroll.js" type="text/javascript"></script>
    <!-- charts scripts -->
    <script src="assets/jquery-knob/js/jquery.knob.js"></script>
    <script src="js/jquery.sparkline.js" type="text/javascript"></script>
    <script src="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js"></script>
    <script src="js/owl.carousel.js" ></script>
    <!-- jQuery full calendar -->
	<script src="assets/fullcalendar/fullcalendar/fullcalendar.js"></script>
    <!--script for this page only-->
    <script src="js/calendar-custom.js"></script>
	<script src="js/jquery.rateit.min.js"></script>
    <!-- custom select -->
    <script src="js/jquery.customSelect.min.js" ></script>
	<script src="assets/chart-master/Chart.js"></script>

    <!--custome script for all page-->
    <script src="js/scripts.js"></script>
    <!-- custom script for this page-->
    <script src="js/sparkline-chart.js"></script>
    <script src="js/easy-pie-chart.js"></script>
	<script src="js/jquery-jvectormap-1.2.2.min.js"></script>
	<script src="js/jquery-jvectormap-world-mill-en.js"></script>
	<script src="js/xcharts.min.js"></script>
	<script src="js/jquery.autosize.min.js"></script>
	<script src="js/jquery.placeholder.min.js"></script>
	<script src="js/gdp-data.js"></script>
	<script src="js/morris.min.js"></script>
	<script src="js/sparklines.js"></script>
	<script src="js/charts.js"></script>
	<script src="js/jquery.slimscroll.min.js"></script>
	<script src="js/dynamicfields.json"></script>
	
  <script>

      //knob
      $(function() {
        $(".knob").knob({
          'draw' : function () {
            $(this.i).val(this.cv + '%')
          }
        })
      });

      //carousel
      $(document).ready(function() {
          $("#owl-slider").owlCarousel({
              navigation : true,
              slideSpeed : 300,
              paginationSpeed : 400,
              singleItem : true

          });
      });

      //custom select box

      $(function(){
          $('select.styled').customSelect();
      });

	  /* ---------- Map ---------- */
	$(function(){
	  $('#map').vectorMap({
	    map: 'world_mill_en',
	    series: {
	      regions: [{
	        values: gdpData,
	        scale: ['#000', '#000'],
	        normalizeFunction: 'polynomial'
	      }]
	    },
		backgroundColor: '#eef3f7',
	    onLabelShow: function(e, el, code){
	      el.html(el.html()+' (GDP - '+gdpData[code]+')');
	    }
	  });
	});
  </script>
	<script type="text/javascript">
	     $(document).ready(function(){
      var i=1;
     $("#add_row").click(function(){
      $('#attr'+i).html('<td><select name="customAttrName'+i+'" class="form-control" th:required="required"> <option value="-1">----Select----</option> <option th:each="entry : ${userAttrs.entrySet()}" th:value="${entry.key}" th:text="${entry.value}"> Wireframe</option> </select></td><td> <input type="text" name="customAttrValue'+i+'" placeholder="Value" class="form-control"/> </td>');

      $('#tab_logic').append('<tr id="attr'+(i+1)+'"></tr>');
      i++; 
  });
     $("#delete_row").click(function(){
    	 if(i>1){
		 $("#attr"+(i-1)).html('');
		 i--;
		 }
	 });

});
	</script>
  </body>
</html>
